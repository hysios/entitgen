// Code generated by entitgen. DO NOT EDIT.
package out

import (
	"github.com/akrennmair/slice"
	pb "github.com/hysios/entitgen/example/gen/proto"
	"github.com/hysios/entitgen/null"
	"github.com/shopspring/decimal"
	"google.golang.org/protobuf/types/known/durationpb"
	"google.golang.org/protobuf/types/known/timestamppb"
	"gorm.io/datatypes"
)

// ToProto converts the model to protobuf type.
func (u *User) ToProto() *pb.User {
	if u == nil {
		return nil
	}
	return &pb.User{
		Id:          uint32(u.ID),
		Name:        u.Name,
		Username:    u.Username,
		Namespace:   u.Namespace,
		Nickname:    u.Nickname,
		Email:       u.Email,
		Password:    null.NullToString(u.Password),
		Avatar:      u.Avatar,
		Phone:       u.Phone,
		Address:     u.Address,
		Description: u.Description,
		PersonId:    null.NullToInt64(u.PersonID),
		Score:       float32(u.Score),
		Role:        pb.Role(pb.Role_value[u.Role]),
		Age:         int32(u.Age),
		IsActive:    u.IsActive,
		Money:       u.Money.InexactFloat64(),
		InScopes:    u.InScopes,
		Period:      durationpb.New(u.Period),
		ExpiresAt:   null.SQLTimeToPbtime(u.ExpiresAt),
		CreatedAt:   timestamppb.New(u.CreatedAt),
		UpdatedAt:   timestamppb.New(u.UpdatedAt),
		ExpiredAt:   null.SQLTimeToPbtime(u.ExpiredAt),
		MemberId:    uint32(u.MemberID),
		Member:      u.Member.ToProto(),
		Leader:      u.Leader.Data(),
		Friends:     slice.Map(u.Friends, FriendToProto),
	}
}

// FromProto converts the protobuf type to model.
func (u *User) FromProto(pUser *pb.User) *User {
	if pUser == nil {
		return nil
	}
	return &User{
		ID:          uint(pUser.Id),
		Name:        pUser.Name,
		Username:    pUser.Username,
		Namespace:   pUser.Namespace,
		Nickname:    pUser.Nickname,
		Email:       pUser.Email,
		Password:    null.ToNullString(pUser.Password),
		Avatar:      pUser.Avatar,
		Phone:       pUser.Phone,
		Address:     pUser.Address,
		Description: pUser.Description,
		PersonID:    null.ToNullInt64(pUser.PersonId),
		Score:       float64(pUser.Score),
		Role:        pb.Role_name[int32(pUser.Role)],
		Age:         uint64(pUser.Age),
		IsActive:    pUser.IsActive,
		Money:       decimal.NewFromFloat(pUser.Money),
		InScopes:    pUser.InScopes,
		Period:      pUser.Period.AsDuration(),
		ExpiresAt:   null.PbtimeToSQLTime(pUser.ExpiresAt),
		CreatedAt:   pUser.CreatedAt.AsTime(),
		UpdatedAt:   pUser.UpdatedAt.AsTime(),
		ExpiredAt:   null.PbtimeToSQLTime(pUser.ExpiredAt),
		MemberID:    uint(pUser.MemberId),
		Member:      (*Member)(nil).FromProto(pUser.Member),
		Leader:      datatypes.NewJSONType(pUser.Leader),
		Friends:     slice.Map(pUser.Friends, FriendFromProto),
	}
}

func UserFromProto(pUser *pb.User) *User {
	return (*User)(nil).FromProto(pUser)
}

func UserToProto(user *User) *pb.User {
	return user.ToProto()
}

func UserListFrom(users []*pb.User) []*User {
	return slice.Map(users, UserFromProto)
}

func UserListToProto(users []*User) []*pb.User {
	return slice.Map(users, UserToProto)
}
